# 🔌 GestureSense 硬件连接指南

## 📋 概述

本指南将详细介绍如何连接GestureSense系统的所有硬件组件。我们以**方案二（完整版）**为基础，提供详细的连接图和步骤说明。

## 🛠️ 所需工具

### 基础工具
- 🔧 小螺丝刀套装
- 🔥 烙铁和焊锡 (可选，用于永久连接)
- ✂️ 剥线钳
- 📏 万用表
- 🔦 放大镜 (可选)

### 连接材料
- 📎 面包板和杜邦线
- 🔌 USB数据线
- ⚡ 5V电源适配器
- 🖥️ 电脑 (用于编程)

---

## 🎯 方案二：完整版硬件连接

### 组件清单
- Arduino Nano RP2040 x1
- MPU-6050 IMU传感器 x1
- TR-40-16 (发射) / RX-40-16 (接收) 超声波传感器 x1对
- MAX98357A I2S音频模块 x1
- INMP441 I2S麦克风 x1
- MB102面包板 x1
- MAX30102心率传感器 x1 (可选)
- SSD1306 OLED显示屏 x1 (可选)

### 🔌 连接总览图

```
Arduino Nano RP2040 (主控制器)
    │
    ├── 🎤 INMP441 (I2S麦克风)
    │   ├── SCK → D2 (SCK)
    │   ├── WS → D3 (WS)
    │   └── SD → D4 (SD)
    │
    ├── 🔊 MAX98357A (I2S扬声器)
    │   ├── BCLK → D2 (SCK) - 共享
    │   ├── LRC → D3 (WS) - 共享
    │   └── DIN → D5 (DIN)
    │
    ├── 📡 MPU-6050 (IMU传感器)
    │   ├── VCC → 5V
    │   ├── GND → GND
    │   ├── SCL → A5 (SCL)
    │   └── SDA → A4 (SDA)
    │
    ├── 📻 超声波传感器
    │   ├── TR-40-16 (发射器)
    │   │   ├── VCC → 5V
    │   │   ├── GND → GND
    │   │   └── Signal → D6 (PWM输出)
    │   │
    │   └── RX-40-16 (接收器)
    │       ├── VCC → 5V
    │       ├── GND → GND
    │       └── Signal → A0 (模拟输入)
    │
    ├── 💓 MAX30102 (心率传感器 - 可选)
    │   ├── VIN → 3.3V
    │   ├── GND → GND
    │   ├── SCL → A5 (SCL) - 共享
    │   └── SDA → A4 (SDA) - 共享
    │
    └── 📺 SSD1306 (OLED显示 - 可选)
        ├── VCC → 3.3V
        ├── GND → GND
        ├── SCL → A5 (SCL) - 共享
        └── SDA → A4 (SDA) - 共享
```

---

## 📋 详细连接步骤

### 1️⃣ 主控制器安装

**Arduino Nano RP2040 定位**
```
面包板中央区域:
  ○ ○ ○ ○ ○ ○ ○ ○ ○ ○ ○ ○ ○ ○ ○
  ○ ● ● ● ● ● ● ● ● ● ● ● ● ● ○  ← USB接口朝上
  ○ ● ● ● ● ● ● ● ● ● ● ● ● ● ○
  ○ ● ● ● ● ● ● ● ● ● ● ● ● ● ○
  ○ ○ ○ ○ ○ ○ ○ ○ ○ ○ ○ ○ ○ ○ ○
```

**连接步骤**:
1. 将Arduino Nano RP2040插入面包板中央
2. 确保引脚完全插入，接触良好
3. USB接口朝外，方便连接电脑

### 2️⃣ I2S音频系统连接

**INMP441 麦克风连接**
```
INMP441引脚布局:
     ┌───────┐
SCK  │●     │ GND
WS   │●     │ VDD
SD   │●     │ L/R
GND  │●     │
     └───────┘

连接到Arduino:
SCK → D2
WS  → D3
SD  → D4
VDD → 3.3V
GND → GND
L/R → GND (左声道)
```

**MAX98357A 扬声器连接**
```
MAX98357A引脚布局:
     ┌───────┐
GAIN │●     │ GND
SD   │●     │ Vin
BCLK │●     │ +
LRC  │●     │ -
DIN  │●     │
     └───────┘

连接到Arduino:
BCLK → D2 (与麦克风共享SCK)
LRC  → D3 (与麦克风共享WS)
DIN  → D5
Vin  → 5V
GND  → GND
GAIN → GND (默认增益)
SD   → 未连接
```

### 3️⃣ IMU传感器连接 (MPU-6050)

```
MPU-6050引脚布局:
     ┌───────┐
VCC  │●     ●│ GND
GND  │●     ●│ XCL
SDA  │●     ●│ XDA
SCL  │●     ●│ AD0
INT  │●     ●│ ADO
     └───────┘

连接到Arduino:
VCC → 5V
GND → GND
SDA → A4
SCL → A5
```

### 4️⃣ 超声波传感器连接

**TR-40-16 发射器**
```
连接到Arduino D6 (PWM输出):
VCC    → 5V
GND    → GND
Signal → D6
```

**RX-40-16 接收器**
```
连接到Arduino A0 (模拟输入):
VCC    → 5V
GND    → GND
Signal → A0
```

### 5️⃣ 可选组件连接

**MAX30102 心率传感器**
```
连接到Arduino (共享I2C):
VIN → 3.3V
GND → GND
SCL → A5
SDA → A4
```

**SSD1306 OLED显示屏**
```
连接到Arduino (共享I2C):
VCC → 3.3V
GND → GND
SCL → A5
SDA → A4
```

---

## 🔍 连接检查清单

### 电源连接检查 ✅
- [ ] 所有VCC引脚连接到正确电压 (5V或3.3V)
- [ ] 所有GND引脚连接到公共地线
- [ ] 没有短路连接

### 信号线连接检查 ✅
- [ ] I2S音频线连接正确 (D2, D3, D4, D5)
- [ ] I2C总线连接正确 (A4, A5)
- [ ] 超声波传感器连接正确 (D6, A0)
- [ ] PWM引脚用于信号输出 (D6)
- [ ] 模拟引脚用于信号输入 (A0)

### 物理连接检查 ✅
- [ ] 所有引脚完全插入面包板
- [ ] 没有松动的连接线
- [ ] 面包板电源线正确连接
- [ ] 组件方向正确

---

## ⚡ 电源配置

### USB供电 (推荐初学者)
```
电脑USB → Arduino Nano → 5V引脚 → 各组件
```
- 优点: 简单安全
- 缺点: 电流有限 (~500mA)

### 外部电源 (推荐实际使用)
```
5V电源适配器 → 面包板电源轨 → 各组件
```
- 需要: 5V 2A电源适配器
- 优点: 电流充足，稳定
- 缺点: 需要额外电源

### 电源分配表
| 组件 | 电压 | 电流 | 总功耗 |
|------|------|------|--------|
| Arduino RP2040 | 5V | 100mA | 0.5W |
| INMP441 | 3.3V | 1.7mA | 0.006W |
| MAX98357A | 5V | 15mA | 0.075W |
| MPU-6050 | 5V | 3.8mA | 0.019W |
| 超声波传感器 | 5V | 10mA | 0.05W |
| MAX30102 | 3.3V | 7mA | 0.023W |
| **总计** | - | ~140mA | **~0.7W** |

---

## 🔧 故障排除

### 常见连接问题

**1. 设备无响应**
- 检查电源连接
- 确认USB连接正常
- 检查引脚连接是否正确

**2. 音频无声音**
- 检查I2S引脚连接 (D2, D3, D5)
- 确认扬声器工作正常
- 检查代码引脚配置

**3. 传感器读数异常**
- 检查I2C连接 (A4, A5)
- 确认电源电压正确
- 检查传感器地址冲突

**4. 超声波无信号**
- 检查发射器连接 (D6)
- 检查接收器连接 (A0)
- 确认传感器朝向正确

### 调试工具使用

**万用表检查**
```
1. 电压检查: 测量各引脚电压
2. 连通性检查: 测试连接线是否导通
3. 电流检查: 测量总功耗
```

**串口监视器**
```
1. 打开Arduino IDE串口监视器
2. 设置波特率为9600
3. 观察调试输出信息
```

---

## 🎯 下一步

1. **完成硬件连接** - 按照本指南连接所有组件
2. **安装开发环境** - 参考《开发环境配置指南》
3. **上传测试代码** - 运行基础功能测试
4. **校准传感器** - 调整参数获得最佳效果
5. **运行演示程序** - 使用我们提供的演示代码

---

**💡 提示**:
- 建议先连接基础组件 (Arduino + 1个传感器)，测试成功后再添加其他组件
- 使用面包板进行原型开发，确认功能正常后再考虑焊接PCB
- 保留连接照片，方便后续调试和参考